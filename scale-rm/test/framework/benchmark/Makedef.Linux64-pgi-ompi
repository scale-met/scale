################################################################################
#
# ------ For Linux64 & pgi fortran&C & openmpi -----
#
################################################################################

##### Fortran setting
#FFLAGS is set in Mkinclude. FFLAGS_DEBUG is used if DEBUG=T

FC  = mpif90
SFC = pgfortran
MODDIROPT = -module

FFLAGS_FAST  = -Mpreprocess -m64 -fast                      \
               -Mbyteswapio -Minfo                          \
               -Mflushz -Mfprelaxed -Mfpapprox -Mvect=assoc -Kieee

FFLAGS_QUICKDEBUG = $(FFLAGS_FAST) -Ktrap=fp -Mbounds -gopt

FFLAGS_DYN   = $(FFLAGS)

FFLAGS_DEBUG = -Mpreprocess -m64 -O0             \
               -Mbyteswapio -Minfo               \
               -Mflushz -Ktrap=fp                \
               -Mbounds -Mstandard -g -traceback \
               -DDEBUG



##### C setting
#CFLAGS is set in Mkinclude. CFLAGS_DEBUG is used if DEBUG=T

CC  = mpicc

CFLAGS_FAST  = -fast
CFLAGS_DEBUG = -O0



##### Special setting

ifeq ($(ENABLE_OPENMP),T)
	OMP = -mp
else
	OMP =
endif

ifeq ($(ENABLE_OPENACC),T)
	ACC = -acc -ta=tesla,cuda8.0,cc60 -Mcuda -Minfo=accel
else
	ACC =
endif

FFLAGS_SYSDEPEND = $(OMP) $(ACC) -D__PGI
CFLAGS_SYSDEPEND = $(OMP) $(ACC) -D__PGI



##### Linker setting

LD      = $(FC)
LDFLAGS = $(FFLAGS)



################################################################################

###### NetCDF library
# Settings are inquired by using nf-config & nc-config command (see scale/Mkinclude)
# Or, please set environment variable
# example:
# export NETCDF_INCLUDE="-I/opt/netcdf4-pgi/netcdf4/include -DNDEBUG -DpgiFortran -fPIC /opt/netcdf4-pgi/netcdf4/include"
# export NETCDF_LIBS="-L/opt/netcdf4-pgi/netcdf4/lib -lnetcdff -lnetcdf"

###### Lapack library
# Please set environment variable
# example:
# export LAPACK_LIBS="-lacml"

##### for frontend
INSTALL = install
AR      = ar
ARFLAGS = r
RANLIB  = ranlib
JOBSUB  = sh
