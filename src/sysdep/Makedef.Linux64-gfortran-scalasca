# ------ FOR MacOSX & gfortran & OpenMPI/MPICH2 -----
#

# Scalasca commands
SCALASCA_INST = scalasca -instrument -user -comp=none

##### for computation

FC     ?= mpif90
FC = $(SCALASCA_INST) $(FC)
FFLAGS = -cpp -O3 -DUSE_SCALASCA
#FFLAGS = -cpp -O0 -g

#
CC     ?= mpicc
CC     = $(SCALASCA_INST) $(CC)
CFLAGS = -O3 -Wall -DUSE_SCALASCA
#CFLAGS = -O0 -g

#

LD     = $(FC)
LFLAGS = $(FFLAGS)

NETCDF_DIR ?= /usr
NETCDF_INCLUDE= -I$(NETCDF_DIR)/include
NETCDF_LIB_DIR=$(if $(shell ls $(NETCDF_DIR)/lib64 2>&1 | grep "No such file"),$(NETCDF_DIR)/lib,$(NETCDF_DIR)/lib64)
NETCDF_LIBS=-L$(NETCDF_LIB_DIR) -lnetcdf -lhdf5_hl -lhdf5 -lz -Wl,-rpath $(NETCDF_LIB_DIR)
